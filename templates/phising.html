<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phishing</title>
    <link rel="stylesheet" href="/static/css/phishing.css">
</head>
<body>
<header class="site-header">
    <div class="title-container">
        <h1>Phishing</h1>
    </div>
    <nav class="navbar"> 
    <a href="#" class="toggle-button" id="toggle-button">
        &#9776
    </a>
    <ul class="nav-links" id="nav-links"> 
        <li><a href="index.html">Home</a></li>
        <li><a href="phising.html">Phising</a></li>
        <li><a href="tutorials.html">Tutorials</a></li>
    </ul>
  </nav>
</header>
<!----Phishing------------------>
<div class="phishing-container">
    <div class="input-section">
    <input type="text" id="url" placeholder="Enter URL">
</div>
    <div class="buttons">
    <button class="check" onclick="clientCheck()">Client Check</button>
    <button class="server" onclick="serverCheck()">Server Check</button>
    </div>
    <div class="output-section"></div>
    <div id="result"></div>
    <pre id="details">Results will appear here.</pre>
</div>
<!------------------------------>







<!-- JavaScript -->
   <script>
    const toggleButton = document.getElementById('toggle-button');
const navLinks = document.getElementById('nav-links');
toggleButton.addEventListener('click', () => {
  navLinks.classList.toggle('active');
});

function normalizeUrl(u){
  if(!/^[a-zA-Z][a-zA-Z0-9+.-]*:\/\//.test(u)) u = 'http://' + u;
  try { return new URL(u); } catch(e){ return null; }
}

function clientCheck(){
  const raw = document.getElementById('url').value.trim();
  const details = document.getElementById('details');
  const result = document.getElementById('result');
  result.innerHTML = '';
  if(!raw){ details.textContent = "Enter a URL"; return; }
  const url = normalizeUrl(raw);
  if(!url){ details.textContent = "Invalid URL"; return; }

  let score = 0;
  const checks = [];

  if(url.username || url.password){ checks.push("Credentials in URL"); score+=2; }
  if(url.href.includes('@')){ checks.push("@ in URL"); score+=1; }
  if(/\d+\.\d+\.\d+\.\d+/.test(url.hostname)){ checks.push("IP address used"); score+=2; }
  if(url.href.length > 75){ checks.push("Long URL"); score+=1; }
  if(url.hostname.split('.').length > 3){ checks.push("Many subdomains"); score+=1; }
  if(url.hostname.includes('-')){ checks.push("Hyphen in domain"); score+=1; }
  if(url.protocol === 'http:'){ checks.push("Not HTTPS"); score+=1; }

  const verdict = score>=2 ? "Suspicious" : (score===1 ? "Possibly Suspicious" : "Likely Safe");
  const badge = document.createElement('span'); 
  badge.className='badge '+(score>=2?'susp':'safe'); 
  badge.textContent=verdict;
  result.appendChild(badge);

  details.textContent = JSON.stringify({url:url.href, score, checks, verdict}, null, 2);
}

async function serverCheck(){
  const raw = document.getElementById('url').value.trim();
  const details = document.getElementById('details');
  const result = document.getElementById('result');
  result.innerHTML='';
  if(!raw){ details.textContent="Enter URL"; return; }

  try{
    const resp = await fetch('http://127.0.0.1:5000/check', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({url: raw})
    });
    const data = await resp.json();
    const badge = document.createElement('span'); 
    badge.className='badge '+(data.score>=2?'susp':'safe'); 
    badge.textContent=data.verdict;
    result.appendChild(badge);
    details.textContent = JSON.stringify(data, null, 2);
  }catch(e){
    details.textContent = "Error calling server: "+e;
  }
}
</script>




</body>
</html>